<div class="container">
  <h1>混雑具合検索</h1>
  <div class="row">
    <div class="col">
      <%= search_form_for @q, url: search_path do |f| %>
      <%= f.label :direction, '方面' %>
      <%= f.select :direction, Post.directions.keys.map {|k| [k, k]}, {prompt:"選択してください"}, class: 'form-control' %>
    </div>
    <div class="col">
      <%= f.label :station_id, '駅名' %>
      <%= f.collection_select :station_id, Station.all, :id, :station_name, {prompt:"選択してください"},  class: 'form-control' %>
    </div>
    <div class="col">
      <%= f.label :day_of_week, '曜日' %>
      <%= f.select :day_of_week, {'日曜': "日", '月曜': "月", '火曜': "火", '水曜': "水", '木曜': "木", '金曜': "金", '土曜': "土"}, { include_blank: '曜日を選択してください'}, { class: 'form-control' , required: true } %>
    </div>
    <%= f.submit '検索' %>
    <% end %>
  </div>
  <hr>

  <div class="row">
    <div class="col-6 bgred">
      <h1>Congestion_level graph</h1>
      <%= column_chart @graph,
                id: 'total-attendance-chart',
                width: '400px',
                height: '500px',
                xtitle: "時間帯", 
                ytitle: "混雑状況",
                colors: ['#06b'] 
            %>
    </div>
    <div class="col-6 bgred">
      <h1>Home#index</h1>
      <h3 class="page-header">投稿一覧</h3>
      <ul class="list-group">
        <div class='card'>
          <div class='card-body'>
            <% @posts.each do |post| %>
            <li class="list-group-item">
              <div>名前:<%= post.user.name %></div>
              <div><%= post.direction %>方面&ensp;
                駅名:<%= post.station.station_name %>&ensp;
                <%= post.time %>時頃</div>
              <div>コメント:<%= post.comment %>&ensp;
                混雑度:<%= post.congestion_level %></div>
            </li>
            <% end %>
          </div>

          <div class='mx-auto'>
            <%= link_to "投稿", posts_path, class: 'nav-link' %>
          </div>

        </div>
      </ul>
    </div>
  </div>
</div>